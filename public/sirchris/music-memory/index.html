


<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
	<title>Battle of Brothers | A Video Game Programming Duel</title>
	<meta name="description" content="Follow Chris and Ryan as they design indie video game software using the Corona SDK and Sprite Kit frameworks in this game programming duel.">
	<meta name="keywords" content=“video,game,programming,software, design, corona, sprite kit, indie”>
	<meta name="author" content="Battle of Brothers">
	<meta name="robots" content="index, follow">
	<meta name="viewport" content="width=1024"/>

  




   	 <link rel="stylesheet" href="/css/chris.css?v=1'; ?>" type="text/css" media="screen" />
    <link rel="stylesheet" href="/css/global.css" type="text/css" media="screen" />



  <link rel="stylesheet" href="/css/post.css?v=1'; ?>" type="text/css" media="screen" />


<script src="/js/index-min.js"></script>

  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-18183842-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-18183842-5');
</script>
</head>
  <body class="home gradient">

    

  	

<div class="top">
	<div class="breadcrumb">
		<p>Currently following
		
		<a href="/sirchris" title="Hurrah!" class="dotted">Sir Chris</a></p> 
		<p><a href="/sirryan" title="To see what the losing team is up to." class="switch ryan">See what Sir Ryan is up to &#8611;</a></p>
		
	</div>
</div>



  	



<header class="content">
	<a class="ryanshield rotate " href="/sirryan">
		<img class="" style="" src="/assets/RyanShield.png" />
	</a>

	
	<a class="mainshield" href="/">
		<img alt="The one year game develpoment duel" src="/assets/Banner.png" width="266px" class="" />
	</a>
	

	<a class="chrisshield counterrotate" href="/sirchris">
		<img style="" src="/assets/ChrisShield.png" />
	</a>

</header> 

  	
<nav>
	
		<div class="navcontainer clear blog">
	
  		<div class="clear">
  			<span>
	  			<a href="/sirchris" class="blog clear">
	  				<img class="" src="/assets/Castle.png" width="16px" />Sir Ryan
	  			</a>
  			</span>
			<span>
	  			<a href="/sirchris/timeline" class="timeline clear">
	  				<img class="" src="/assets/Boom.png" width="16px"  />Timeline
	  			</a>
  			</span>
			<span>
	  			<a href="/sirchris/budget" class="budget clear">
	  				<img class="" src="/assets/Money-5.png" width="16px"  />Budget
	  			</a>
  			</span>
		</div>
		<div class="navspacer">&nbsp;</div>
		<div class="clear">
			<span>
	  			<a href="/sirchris/contact" class="contact clear">
	  				<img class="" src="/assets/Game-Controller.png" width="16px"  />Contact
	  			</a>
  			</span>
			<span>
	  			<a href="/sirchris/subscribe" class="subscribe clear">
	  				<img class="" src="/assets/RSS.png" width="16px"  />Subscribe
	  			</a>
  			</span>
			<span>
	  			<a href="/sirchris/about" class="about clear">
	  				<img class="" src="/assets/Pacman-2.png" width="16px"  />About
	  			</a>
  			</span>
		</div>
	</div>
</nav>


    <div class="outercontent">
  	  <div class="content clear">

		<article class="clear">
			<div class="title clear">
				
<div class="floatleft timestamp">
	<span class="month">Mar</span>
	<p class="shield" style="background-image:url('/assets/Shield12.png')">31</p>
	<span class="year legacy">2015</span>
</div>
				<h3 class="grace">Music &amp; Memory</h3>
				<div class="subhead">
					



	
	
		
	


<span class="comments floatright">
	<img class="icon" src="/assets/Chat-6.png" width="16px" />
	<small><a href="/sirchris/music-memory/#comments" class="dotted"><span></span>3 comments</a></small>
</span>
<img class="icon" src="/assets/Tag-star.png" width="16px">
<small>
	
	<a href="/sirchris/tags/status" class="dotted">status</a>
	
</small>
				</div>
			</div>

			
				<div class="thumbnail">
					<img src="/wp-content/uploads/2015/03/Unknown.png" width="660" />
				</div>
			

			
				
					<p class="milestone">
						<img src="/assets/Arrow-board.png" width="48px" class="floatleft" />
						This post is a status update, which is how I track progress specific to my game. 
						Check out <a href="/sirsirchris/timeline" class="dotted underline">my timeline</a> to see what I've recently accomplished.
					</p>
				
			

			<div class="post source_light">		
				
					<ul class="events embed floatright">Key Events
						
							<li>First music scored.</li>
						
							<li>Help with intro video.</li>
						
					</ul>		
				
 				<p>I’m happy to report that I’ve received the first 30 seconds of game music and that my ears are happy with what they&#8217;re hearing. It’s amazing what a little sound can do to the intro video and I can’t wait to see how the future music adds more depth to the game. I’ve also continued to experiment with some memory concerns and making scene transitions as smooth as possible. That’s required a bit of a re-write, but the game is heavy on texture memory usage, so it’s important to tackle this issue sooner than later.
</p>

<p>Let’s start off with the most interesting part of this update &#8211; music. As a quick recap, I’ve contracted <a href="http://www.brendonwilliams.com">Brendon Williams</a>, a talented composer, to create the game’s music. He’ll be scoring original pieces for the intro video, start screen, world map, and battles. He’s starting with the intro video because that will set the tone for the rest of the game. The first piece of music marks the transition from a series of evil scenes to scenes featuring the heroes, so I asked Brendon to kind of make something to transition from what will be a slow evil drum sound to a more defiant and vibrant heroic sound. Something like <a href="https://youtu.be/mGkNHG64O-8">The Gael from The last of the Mohicans Theme</a>. There’s only about 25 seconds of music so far, but I think Brendon is off to a fantastic start.</p>

<div class="inlineimg">
  
<div style="position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;">
  <iframe src="//www.youtube.com/embed/oChbnCv1H1k" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allowfullscreen frameborder="0" title="YouTube Video"></iframe>
 </div>

</div>

<h4 id="intro-video">Intro Video</h4>

<p>A friend of mine who runs a creative studio, <a href="http://secretpowers.com">Secret Powers</a>, was in town recently and I had him take a look at the intro. He said things weren’t bad, but there was a lot that could be done to make things better. When you take a look at his <a href="http://secretpowers.com/portfolio/secret-powers-2014-showreel/">demo reel</a>, it’s obvious that while my work is alright, his is really great. I asked him to help me make things better and once we got talking, we decided that it might be a good idea for him to handle some of my video needs. Things like this intro, the ending video, game trailers, etc.</p>

<p>We haven’t finalized anything yet, but I believe he’ll be on board soon to help out with these videos. That would be a big win for me not only because it’s going to make all of my marketing materials 10x more awesome, but it’s going to save me a ton of time. I also think it’s going to be possible to directly embed video into the game and not worry about manually coding all of the video animations. In theory that should make the loading time a lot shorter and improve quality.</p>

<h4 id="battlefield-animations">Battlefield Animations</h4>

<p>I plan on adding movement to the battlefield scenes where possible and I set up the code to handle how that’s going to work. Things like moving water, floating rocks, and pulsing magic will help the world feel a little more alive. I’ll need a little help from the illustrator or the first two items, but here’s a look at some of the land’s magic pulsing.</p>

<div class="inlineimg">
  <div style='position:relative;padding-bottom:calc(100% / 1.78)'><iframe src='https://gfycat.com/ifr/ElegantEmbarrassedGardensnake' frameborder='0' scrolling='no' width='100%' height='100%' style='position:absolute;top:0;left:0;' allowfullscreen></iframe></div>
</div>

<div class="inlineimg">
  <div style='position:relative;padding-bottom:calc(100% / 1.78)'><iframe src='https://gfycat.com/ifr/BewitchedTautAlleycat' frameborder='0' scrolling='no' width='100%' height='100%' style='position:absolute;top:0;left:0;' allowfullscreen></iframe></div>
</div>

<h4 id="scene-management">Scene Management</h4>

<p>I wrote about scene management a little bit last time and how scene transitions can be a little slow without multi threading. I’ve re-written each game scene to correctly run off of Corona’s composer library, and while that helps with code organization, it doesn’t really help with making transitions any faster. In order to do that there are a few things that I’ve been experimenting with:</p>

<p><strong>Efficient Animations</strong></p>

<p>I’ve been working on the world map recently and when I load the scene without any animations, the texture memory usage comes in at about 20MB. That number jumps to about 75MB when the animations are loaded. That’s just way too much memory and the main reason why is because I have 4 high quality 90 frame water animations going on. Here’s a look at the world map with waterfalls, rapids, and waves.</p>

<div class="inlineimg">
  <div style='position:relative;padding-bottom:calc(100% / 1.78)'><iframe src='https://gfycat.com/ifr/ClassicDependableChanticleer' frameborder='0' scrolling='no' width='100%' height='100%' style='position:absolute;top:0;left:0;' allowfullscreen></iframe></div>
</div>

<p>The first thing I’m going to play around with is using fewer frames. Each waterfall cycle is 2-3 seconds, so I should be able to cut the number of frames needed in half. The other thing I’m going to try is shrinking the size of each frame and then scaling it up to the appropriate size on the world map. I’m usually hesitant to scale images up, but I think it might work out with the water animations just because there is generally more flexibly with how water works.</p>

<p>One thing to note is that I have a few battle maps with water, and there is absolutely no way I’ll be able to animate that water with a high number of frames. I’m probably going to have to resort to a 3 frame cycle animation, some masking tricks, or a combo of both.</p>

<p><strong>Loading More at Once</strong></p>

<p>While play testing the game, I noticed that I’d rather wait 20 seconds one time than 10 seconds two times. There are also times when waiting feels natural and times when waiting feels like it interrupts the flow of the game. What I’ve been trying to do is load more assets at opportunistic times to make the game feel smoother and to have fewer, but longer breaks in the action.</p>

<p><strong>Keeping Scenes in Memory</strong></p>

<p>Some scenes, like the world map and character management scenes, are re-used throughout the game. Other scenes, like battle scenes, are only played one time. The time spent transitioning between scenes can be dramatically lowered by keeping reusable scenes in memory, so I’d like to keep those scenes in memory as much as possible. The key here is to reduce the memory allocated to the re-usable scenes, because everything takes a hit if they’re too memory intensive. Right now the world map takes up a lot of memory, so I have some adjustments to make.</p>

<p><strong>Keeping Textures in Memory</strong></p>

<p>Character sprite animations are the game’s biggest memory hogs, so any efficiencies I can find with those animations will have big impacts on overall memory management. Some characters are commonly seen throughout the game, so it probably makes sense to keep them, or at least their sprite textures, in memory. My initial test show that this can work out, but I’ll need to program something that knows when to dynamically load and un-load character sprites as needed. I don’t want to keep a character in memory if they won’t be around for a while, and I’ll also need a way to un-load any non-essential assets if I’m nearing max memory usage limits.</p>

<h4 id="next-time">Next Time</h4>

<p>I can feel a little bit of burnout coming on and that’s going to work out nicely considering that I’m taking a few days off in a couple of weeks. Right now I&#8217;m trying to complete as many tedious tasks as possible so that I have something clean and fun to work on when I return.</p>
			</div>

		</article>

	</div>
</div>

<div class="outercontentalt">
  	<div class="content clear">

  		<div id="discuss" class="discuss">
			<img class="" src="/assets/discuss.png" />
		</div>

	  
	  
	  
	  	
	  	
		    <h5 class="grace comment-count"><span class="legacy">3</span> of you did not hold your tongue!</h5>
			<ol id="comments" class="commentlist">
		  		
		    		

		    			


<li >
	<div class="comment-body">
		<div class="comment-author vcard">
			<img src="https://www.gravatar.com/avatar/4fed8814655c665605a755ab7a2c0cb9?s=118&d=http://battleofbrothers.com/assets/comment_av_10.png" alt="" class="avatar avatar-64 photo" height="118" width="118">
		</div>
		<div class="comment-wrapper">
			
				<p>Nice work, Sir Chris! It&#39;s looking great so far. Can&#39;t wait to get the game on my iPhone.</p>
			
		</div>
		<div class="comment-meta commentmetadata">
			<a href="#">#</a> by 
			<cite class="fn">
				
				    kermit4karate
				
			</cite> Apr 1, 2015
		</div>
		<div class="reply">
			<a id="1475" class="btn-info comment-reply-link" href="#comment-form" onclick="changeValue('fields[reply_to]', '1475')">Reply</a>
		</div>
	</div>
</li>

<ul class="children">

  

  

  

</ul> 

		    		
		  		
		    		

		    			


<li >
	<div class="comment-body">
		<div class="comment-author vcard">
			<img src="https://www.gravatar.com/avatar/f5011256ac9f5eb653d5eb62bea79db3?s=118&d=http://battleofbrothers.com/assets/comment_av_10.png" alt="" class="avatar avatar-64 photo" height="118" width="118">
		</div>
		<div class="comment-wrapper">
			
				<p>Thanks!</p>
			
		</div>
		<div class="comment-meta commentmetadata">
			<a href="#">#</a> by 
			<cite class="fn">
				
				    Chris Campbell
				
			</cite> Apr 1, 2015
		</div>
		<div class="reply">
			<a id="1481" class="btn-info comment-reply-link" href="#comment-form" onclick="changeValue('fields[reply_to]', '1481')">Reply</a>
		</div>
	</div>
</li>

<ul class="children">

  

  

  

</ul> 

		    		
		  		
		    		

		    			


<li >
	<div class="comment-body">
		<div class="comment-author vcard">
			<img src="https://www.gravatar.com/avatar/?s=118&d=http://battleofbrothers.com/assets/comment_av_7.png" alt="" class="avatar avatar-64 photo" height="118" width="118">
		</div>
		<div class="comment-wrapper">
			
				<p>[&amp;#8230;] Williams already created a great piece for the game&amp;#8217;s intro and this was his first attempt at battle [&amp;#8230;]</p>
			
		</div>
		<div class="comment-meta commentmetadata">
			<a href="#">#</a> by 
			<cite class="fn">
				
				    Battle of Brothers | A Video Game Programming Duel
				
			</cite> Jun 10, 2015
		</div>
		<div class="reply">
			<a id="1487" class="btn-info comment-reply-link" href="#comment-form" onclick="changeValue('fields[reply_to]', '1487')">Reply</a>
		</div>
	</div>
</li>

<ul class="children">

  

  

  

</ul> 

		    		
		  		     
		  	</ol>  
		 

		 <hr />
	  
 
	  <div class="comment-form">
  <div id="respond" class="comment-respond">
    <h3 id="reply-title" class="comment-reply-title">Speak Freely <small></h3>     

    <form class="comment-form" method="POST" action="https://api.staticman.net/v2/entry/veeneck/Battle-of-Brothers-Hugo/master/comments">
        <p class="comment-notes">
          <span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span>
        </p>
          <p class="comment-form-comment">
            <label for="comment">Comment</label> 
            <textarea id="comment" name="fields[body]" class="post-comment-field" placeholder="Your message. Feel free to use Markdown." cols="45" rows="8" maxlength="65525" required="required"></textarea>
          </p>
          <p class="comment-form-author">
            <label for="author">Name <span class="required">*</span></label> 
            <input id="author" name="fields[name]" type="text" class="post-comment-field" placeholder="Your name" required="required" size="30" maxlength="245">
          </p>
          <p class="comment-form-email">
            <label for="email">Email</label> 
            <input id="email" name="fields[email]" type="email" class="post-comment-field" placeholder="Your email address" ize="30" maxlength="100">
          </p>
          <p class="comment-form-url">
            <label for="website">Website</label> 
            <input id="website" name="fields[website]" type="url" class="post-comment-field" placeholder="http://yoursite.com" ize="30" maxlength="200">
          </p>
          <p class="form-submit">
            <input type="submit" id="submit" class="post-comment-field btn submit" value="Submit" id="submit_button" value="Post Comment">
            <input type="hidden" name="options[redirect]" value="http://battleofbrothers.com/sirchris/music-memory/#post-submitted">
            <input type="hidden" name="options[redirectError]" value="http://battleofbrothers.com/sirchris/music-memory/#post-error">
            <input type="hidden" name="options[entryId]" value="2015-03-31-music-memory">
            <input type="hidden" name="options[slug]" value="http://battleofbrothers.com/sirchris/music-memory/">
            <input type="hidden" name="options[origin]" value="http://battleofbrothers.com/sirchris/music-memory/">
            <input type="hidden" name="options[parent]" value="2015-03-31-music-memory">
            <input type="hidden" name="fields[reply_to]" value="">
          </p>      
      </form>
    </div>

    <div id="post-submitted">
      <hr style="margin-bottom: 50px;" />
      <h3 class="comment-reply-title">Thank you</h3>
        <p>Your comment will be published once it has been approved.</p>
        <p><a class="comment-reply-link" href="https://github.com/veeneck/Battle-of-Brothers-Hugo/pulls">Click here</a> to see the pull request you generated.</p>
    </div>
</div>
     </div>
</div> 

    
    <footer class="clear">

  	<div class="bob">
  		<img src="/assets/battleofbrothers.png" />
  	</div>

  	<div style="display:table;">
		<div class="footer_content">
		  	<div class="corner cell">
		  		<p>&nbsp</p>
	  			<img class="ryanfoot" src="/assets/RyanShieldLarge.png" />
	  		</div>
			<div class="about_contest cell">
				<div class="inner">
					<h5>$25,000. 2 brothers. 1 year. 0 experience.</h5>
					<p>Armed with little to no game development experience, we're setting out to see who can make the best game. 
					In the spirit of learning and following a passion, we're each going to take one year and a $25,000 budget to see how far we can get. 
					It begins on April 7th, 2014. We'll be documenting the journey.</p>
					<p><a href="/">Learn More!</a></p>
				</div>
			</div>
			<div class="links cell">
				<div class="outer">
					<h5>Sir Ryan</h5>
					<p>
						<a class="ryan" href="/sirryan/">Blog</a> /&nbsp; 
						<a class="ryan" href="/sirryan/budget">Budget</a> /&nbsp; 
						<a class="ryan" href="/sirryan/timeline">Timeline</a><span class="social">C</span>
						<a class="white" href="https://twitter.com/veeneck">@veeneck</a></br>
						<a class="ryan" href="/sirryan/contact">Contact</a> /&nbsp; 
						<a class="ryan" href="/sirryan/about">About</a> /&nbsp; 
						<a class="ryan" href="/category/sirryan">Archive</a>
						<span class="social rss">V</span><a class="white" href="http://feeds.feedburner.com/BattleOfBrothers">RSS Feed</a></br>
					</p>
					<h5>Sir Chris</h5>
					<p>
					<a class="chris" href="/sirchris/">Blog</a> /&nbsp; 
					<a class="chris" href="/sirchris/budget">Budget</a> /&nbsp; 
					<a class="chris" href="/sirchris/timeline">Timeline</a>
					<span class="social">C</span><a class="white" href="https://twitter.com/codepaladin">@codepaladin</a></br>
					<a class="chris" href="/sirchris/contact">Contact</a> /&nbsp; 
					<a class="chris" href="/sirchris/about">About</a> /&nbsp; 
					<a class="chris" href="/category/sirchris">Archive</a><span class="social rss">V</span>
					<a class="white" href="http://feeds.feedburner.com/BattleOfBrothers">RSS Feed</a></br></p>
				</div>
			</div>
			<div class="corner cell">
				<p>&nbsp</p>
				<img class="chrisfoot" src="/assets/ChrisShieldLarge.png" />
			</div>
		</div>
	</div>
</footer>
  </body>
</html>